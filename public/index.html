<!DOCTYPE html>
<html ng-app="myApp">
<head>
    <!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" integrity="sha512-dTfge/zgoMYpP7QbHy4gWMEGsbsdZeCXz7irItjcC3sPUFtf0kuFbDz/ixG7ArTxmDjLXDmezHubeNikyKGVyQ==" crossorigin="anonymous">

<!-- Optional theme -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css" integrity="sha384-aUGj/X2zp5rLCbBxumKTCw2Z50WgIr1vs/PFN4praOTvYXWlVyh2UtNUU0KAUhAX" crossorigin="anonymous">
    
<link rel="stylesheet" type="text/css" href="style/main.css">
    
    <title>CDS Student Center Point Tracker</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
    <div class="container" ng-controller="AppCtrl">
        <h1>CDS Student Center Point Tracker</h1>
        <div>
            <button class="btn btn-primary" ng-click="showAddForm = !showAddForm">Add a Student</button>
        </div>
        <form role="form" ng-submit="addStudent()" ng-show="showAddForm">
            <div class="form-group">
                <label>Name:</label>
                <input class="form-control" type="text" ng-model="student.name" name="name" required>
            </div>
            <div class="form-group">
                <label>PawPrint:</label>
                <input class="form-control" type="text" ng-model="student.pawPrint" name="pawPrint" required>
            </div>
            <input type="hidden" ng-model="student.pointTotal" ng-value="0">
            <input type = "submit" value="Submit">
        </form>
        <hr>
        <table class="table">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>PawPrint</th>
                    <th>Point Total</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat-start="student in studentlist" ng-click="showDetail(student); getHistory(student._id); getWarnings(student._id)" ng-class="{'danger-points-color': student.pointTotal >= 4, 'high-points-color': student.pointTotal > 2 && student.pointTotal < 4, 'low-points-color': student.pointTotal <= 2 && student.pointTotal > 1, 'very-low-points-color': student.pointTotal > 0 && student.pointTotal <= 1, 'default-color': student.pointTotal == 0}">
                    <td>{{student.name}}</td>
                    <td>{{student.pawPrint}}</td>
                    <td>{{student.pointTotal}}</td>
                </tr>
                <tr ng-repeat-end=" " ng-show="active==student" id="revealedRow">
                    <td colspan="3">
                        <div>
                            <h2 class="dropDownHeader">Give/Remove Points</h2>
                            <form role="form" name="ptsForm">
                                <label class="radio-inline">
                                    <input type="radio" ng-model="points.number" value="1" ng-required="true">
                                    Out of Uniform [1 pt]
                                </label>
                                <label class="radio-inline">
                                    <input type="radio" ng-model="points.number" value="1.5" ng-required="true">
                                    Insubordination [1.5 pts]
                                </label>
                                <label class="radio-inline">
                                    <input type="radio" ng-model="points.number" value="3" ng-required="true">
                                    No Call, No Show [3 pts]
                                </label>
                                <label class="radio-inline">
                                    <input type="radio" ng-model="points.number" value="-.5" ng-required="true">
                                    Remove half-point
                                </label>
                                <label class="radio-inline">
                                    <input type="radio" ng-model="points.number" value="-1" ng-required="true">
                                    Remove 1 point
                                </label>
                                <div class="form-group">
                                    <label>Short Description:</label>
                                    <textarea class="form-control" rows="3" ng-model="points.description" ng-required="true"></textarea>
                                </div>
                                <div class="form-group">
                                    <label>Manager/Supervisor:</label>
                                    <input type="text" class="form-control" ng-model="points.author" ng-required="true">
                                </div>
                                <p>
                                    <button ng-disabled="ptsForm.$invalid" id="submitPtsBtn" class="btn btn-warning" ng-click="update(student._id)">Submit Points</button>
                                </p>
                            </form>
                            <form role="form" name="warningForm">
                                <h2 class="dropDownHeader">Give Warning</h2>
                                <label class="radio-inline">
                                    <input type="radio" ng-model="warnings.type" value="phone" ng-required="true">
                                    Cell Phone Abuse
                                </label>
                                <label class="radio-inline">
                                    <input type="radio" ng-model="warnings.type" value="uniform" ng-required="true">
                                    Out of Uniform
                                </label>
                                <div class="form-group">
                                    <label>Short Description:</label>
                                    <textarea class="form-control" rows="3" ng-model="warnings.description" ng-required="true"></textarea>
                                </div>
                                <div class="form-group">
                                    <label>Manager/Supervisor:</label>
                                    <input type="text" class="form-control" ng-model="warnings.author" ng-required="true">
                                </div>
                                <p>
                                    <button ng-disabled="warningForm.$invalid" id="submitWarningsBtn" class="btn btn-warning" ng-click="warn(student._id)">Submit Warning</button>
                                </p>

                            </form>
                            <div id="warningContainer">
                                <h2 class="dropDownHeader">{{student.name}}'s Warning History</h2>
                                <ul ng-repeat="w in warnHistory">
                                    <li>{{w.date}} -- Mgr/Supervisor: {{w.author}} -- Type: {{w.type}} -- Description: {{w.description}}</li>
                                </ul>
                            </div>
                            <div id="historyContainer">
                                <h2 class="dropDownHeader">{{student.name}}'s Point History</h2>
                                <ul ng-repeat="h in history">
                                    <li>{{h.date}} -- Mgr/Supervisor: {{h.author}} -- Action: {{h.desc}} -- Description: {{h.description}}</li>
                                </ul>
                            </div>
                            <hr>
                            <span><button id="removeButton" class="btn btn-danger" ng-click="remove(student._id); removeLog(student._id); removeWarnings(student._id)">Remove Student from Tracker</button></span>
                            <span class="label label-warning">Warning: Irreversible</span>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- Get Angular -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.7/angular.min.js"></script>
    <!-- Get Angular Bootstrap -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/0.14.3/ui-bootstrap-tpls.min.js"></script>
    <!-- Get Controller -->
    <script src="controllers/controller.js"></script>
</body>
</html>
